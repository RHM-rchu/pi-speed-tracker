<!doctype html>
<html>
    <head>
        <title>How to Make Bootstrap Modal with File Upload and Preview - jQuery AJAX</title>
        
        <!-- jQuery -->
        <script src="jquery-3.1.1.min.js" type='text/javascript'></script>

        <!-- Bootstrap -->
        <link href='bootstrap/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
        <script src='bootstrap/js/bootstrap.min.js' type='text/javascript'></script>
        
       </head>  
    <body>

        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#uploadModal">Upload file</button>

        <!-- Modal -->
        <div id="uploadModal" class="modal fade" role="dialog">
          <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">File upload form</h4>
                </div>
                <div class="modal-body">
                    <!-- Form -->
                    <form method='post' action='' enctype="multipart/form-data">
                        Select file : <input type='file' name='file' id='file' class='form-control' ><br>
                        <input type='button' class='btn btn-info' value='Upload' id='btn_upload'>
                    </form>

                    <!-- Preview-->
                    <div id='preview'></div>
                </div>
                
            </div>

          </div>
        </div>

        <!-- Script -->
        <script type='text/javascript'>
        $(document).ready(function(){
            $('#btn_upload').click(function(){

                var fd = new FormData();
                var files = $('#file')[0].files[0];
                fd.append('file',files);

                // AJAX request
                $.ajax({
                    url: 'ajaxfile.php',
                    type: 'post',
                    data: fd,
                    contentType: false,
                    processData: false,
                    success: function(response){
                        if(response != 0){
                            // Show image preview
                            $('#preview').append("<img src='"+response+"' width='100' height='100' style='display: inline-block;'>");
                        }else{
                            alert('file not uploaded');
                        }
                    }
                });
            });
        });
        </script>
    </body>
</html>